sudo: required
language:
    - python
    - c
python: "3.5"
compiler: gcc clang
install:
    - sudo apt-get update -qq
    - sudo apt-get install -qq doxygen libtool automake autoconf
    - sudo python -m pip install pytest
script:
    - ./makeconf.sh
    - ./configure
    - make CFLAGS="-fsanitize=address,undefined -g -O1 -Wall -Werror" all
    - doxygen doc/Doxyfile
    - python -m pytest test/
    - CC=clang CFLAGS="-fsanitize=address,undefined -g -O1 -Wall -Werror"
      (./configure && make clean && make all)
    - python -m pytest test/


